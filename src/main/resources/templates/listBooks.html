<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Book Reservation - Welcome and choose a Book</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body class="bg-light">
<header class="py-4 bg-white shadow-sm mb-4">
    <div class="container">
        <h1 class="text-center fw-bold">Welcome to our Book Reservation App</h1>
    </div>
</header>

<main class="container">

    <!-- Search Form -->
    <form th:action="@{/books}" method="get" class="row g-2 mb-4">
        <div class="col-md-6">
            <input type="text" class="form-control" name="title" placeholder="Search by title" />
        </div>
        <div class="col-md-4">
            <input type="number" class="form-control" name="minRating" placeholder="Minimum rating" step="0.1" />
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">Search</button>
        </div>
    </form>

    <!-- Reservation Form -->
    <form action="/bookReservation" method="POST" class="card p-4 shadow-sm">

        <h2 class="mb-3">Choose a book:</h2>

        <div class="list-group mb-4">
            <div th:each="book : ${books}" class="list-group-item">

                <label class="d-flex align-items-center justify-content-between">

                    <div>
                        <input type="radio" name="bookTitle" th:value="${book.getTitle()}" required class="form-check-input me-2">
                        <strong th:text="${book.getTitle()}"></strong>
                        <span class="text-muted ms-2">
                            (Genre: <span th:text="${book.getGenre()}"></span>,
                            Rating: <span th:text="${book.getAverageRating()}"></span>)
                        </span>
                    </div>

                    <div class="d-flex gap-2">

                        <!-- Delete -->
                        <form th:action="@{'/books/delete/' + ${book.id}}" th:method="delete">
                            <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                        </form>

                        <!-- Edit -->
<!--                        <a th:href="@{'/books/edit/' + ${book.id}}"-->
<!--                           class="btn btn-outline-secondary btn-sm">Edit</a>-->
                        <button type="submit" name="edit" th:formaction="@{'/books/book-form/' + ${book.getId()}}" formmethod="get" formnovalidate>
                            Edit
                        </button>

                        <!-- Add to Cart -->
                        <form th:action="@{'/books/add-book/{id}' (id=${book.getId()})}"
                              th:method="POST">
                            <button type="submit" class="btn btn-outline-primary btn-sm">Add to Cart</button>
                        </form>

                    </div>
                </label>

            </div>
        </div>

        <h2>Enter your information:</h2>
        <div class="mb-3">
            <label class="form-label">Your Name:</label>
            <input type="text" name="readerName" class="form-control" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Your Address:</label>
            <input type="text" name="readerAddress" class="form-control" required>
        </div>

        <h2>Choose number of copies:</h2>
        <input type="number" name="numCopies" min="1" max="10" required class="form-control w-25 mb-4">

        <input type="submit" class="btn btn-success btn-lg w-100" value="Reserve Book">Reserve Book</input>
    </form>

</main>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
